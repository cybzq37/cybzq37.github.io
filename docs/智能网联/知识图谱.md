
```mermaid
graph LR
    A[è½¦å†…è®¾å¤‡] --> B[T-Box]
    B --> C[è½¦åŽ‚ TSP å¹³å°]
    C --> D[æ‰‹æœº App]
    C --> E[æ•°æ®å¹³å°]
    C --> F[æ”¿åºœç›‘ç®¡å¹³å°]

    style A fill:#e3f2fd,stroke:#90caf9,stroke-width:2px
    style B fill:#fff3e0,stroke:#ffb74d,stroke-width:2px
    style C fill:#e8f5e9,stroke:#81c784,stroke-width:2px
    style D fill:#f3e5f5,stroke:#ba68c8,stroke-width:2px
    style E fill:#ede7f6,stroke:#9575cd,stroke-width:2px
    style F fill:#fffde7,stroke:#fff176,stroke-width:2px

```

| é¡¹ç›®   | T-Box ï¼ˆTelematics Boxï¼‰   | TSP ï¼ˆTelematics Service Platformï¼‰ |
| ---- | ------------------------ | --------------------------------- |
| ä½ç½®   | è½¦è½½ç¡¬ä»¶ï¼Œå®‰è£…åœ¨è½¦è¾†å†…éƒ¨             | äº‘ç«¯ç³»ç»Ÿï¼Œéƒ¨ç½²åœ¨è½¦åŽ‚/æœåŠ¡å•†çš„æœåŠ¡å™¨                |
| æœ¬è´¨   | è½¦è½½é€šä¿¡æŽ§åˆ¶å™¨ï¼Œç±»ä¼¼â€œè°ƒåˆ¶è§£è°ƒå™¨â€æˆ–â€œç½‘å…³â€   | åŽå°æœåŠ¡å¹³å°ï¼Œå¤„ç†æ•°æ®ã€æä¾›æŽ¥å£ã€åšä¸šåŠ¡é€»è¾‘            |
| ä½œç”¨   | é‡‡é›†è½¦è¾†æ•°æ®ã€å‘é€æ¶ˆæ¯ã€æ‰§è¡Œè¿œç¨‹æŒ‡ä»¤       | ç®¡ç†è½¦è¾†æ•°æ®ã€ç”¨æˆ·æ•°æ®ã€å‘é€æŒ‡ä»¤ã€ä¸Žå¤–éƒ¨å¯¹æŽ¥            |
| åŠŸèƒ½ä¸¾ä¾‹ | å®šä½ä¸Šä¼ ã€æ•…éšœä¸ŠæŠ¥ã€æŽ¥æ”¶OTAã€è¿œç¨‹æŽ§åˆ¶è½¦é—¨   | ç”¨æˆ·ç™»å½•ã€è½¦è¾†ç»‘å®šã€è½¨è¿¹å±•ç¤ºã€OTAç­–ç•¥ä¸‹å‘            |
| åè®®   | æ”¯æŒç§æœ‰/æ ‡å‡†åè®®ï¼ˆå¦‚ GB/T 32960ï¼‰  | æŽ¥æ”¶TBoxåè®®å¹¶è§£æžã€ä¹Ÿä¼šæš´éœ²HTTP/MQTTç­‰æŽ¥å£      |
| å¼€å‘é‡ç‚¹ | åµŒå…¥å¼å¼€å‘ã€CANé€šä¿¡ã€æ— çº¿é€šä¿¡ï¼ˆLTE/5Gï¼‰ | åŽç«¯å¼€å‘ã€æ•°æ®å¤„ç†ã€æŽ¥å£å®‰å…¨ã€æŒ‡ä»¤é˜Ÿåˆ—ç®¡ç†             |

**ä¸“ä¸šæœ¯è¯­ï¼š**
EEæž¶æž„ï¼Œæ±½è½¦ç”µå­ç”µæ°”æž¶æž„
ECU	Electronic Control Unitï¼Œç”µå­æŽ§åˆ¶å™¨å•å…ƒ
T-BOX	telematics boxï¼Œè¿œç¨‹é€šä¿¡æ¨¡å—
CAN	Controller Area Networkï¼ŒæŽ§åˆ¶å™¨åŒºåŸŸç½‘ç»œï¼Œæ€»çº¿åè®®ä¹‹ä¸€
LIN	æ€»çº¿åè®®ä¹‹ä¸€ï¼Œä¸²è¡Œé€šè®¯ç½‘ç»œ
FlexRay	æ€»çº¿åè®®ä¹‹ä¸€ï¼Œä¸€ç§æ—¶é—´è§¦å‘å¼çš„æ€»çº¿ç³»ç»Ÿ
ADAS	Advanced Driver Assistance Systemsï¼Œé«˜çº§é©¾é©¶è¾…åŠ©ç³»ç»Ÿ
BCM	æ±½è½¦è½¦èº«æŽ§åˆ¶æ¨¡å—
VCU	æ•´è½¦æŽ§åˆ¶å™¨
ACU	è‡ªåŠ¨é©¾é©¶åŸŸæŽ§åˆ¶å™¨
HeadUnitï¼šè½¦è½½å¨±ä¹ä¿¡æ¯ç³»ç»Ÿï¼Œç®€ç§°HUæˆ–HUT
TSP	Telematics Service Providerï¼Œæ±½è½¦è¿œç¨‹æœåŠ¡æä¾›å•†ï¼Œè½¦è”ç½‘æœåŠ¡å¹³å°
TBOXï¼šTelematics Boxï¼Œç®€ç§°TBOXï¼ˆTç›’ï¼‰ï¼ŒTBOXä¸»è¦ç”¨äºŽé‡‡é›†è½¦è¾†æ•°æ®ä¸ŽTSPå¹³å°å®žæ—¶é€šä¿¡ï¼Œæ•°æ®ä¸ŠæŠ¥ï¼Œäººè½¦äº¤äº’ã€‚
SMSï¼šçŸ­ä¿¡å¹³å°ã€‚
GBCENTERï¼šå›½æ ‡å¹³å°æˆ–åœ°æ ‡å¹³å°çš„ç®€ç§°ã€‚

I-Callï¼šæä¾›èµ„è®¯ï¼Œä¸€é”®å¯¼èˆªç­‰ã€‚
B-Callï¼šæä¾›é“è·¯æ•‘æ´æœåŠ¡ã€‚
E-Callï¼šæä¾›ç´§æ€¥æ•‘æ´æœåŠ¡ã€‚
VINï¼šè½¦è¾†è¯†åˆ«ç ï¼Œç®€ç§°è½¦æž¶å·ã€‚
IMSIï¼šSIMå¡æœåŠ¡è¯†åˆ«å·ï¼Œç”¨æ¥è¯†åˆ«SIMå¡å…¥ç½‘æœåŠ¡çš„æ ‡è¯†ã€‚
ICCIDï¼šSIMå¡ç¡¬ä»¶è¯†åˆ«å·ï¼Œç”¨æ¥è¯†åˆ«SIMå¡çš„ç¡¬ä»¶ã€‚
IMEIï¼šTBOXçš„å”¯ä¸€è®¾å¤‡è¯†åˆ«ç ï¼Œç”¨äºŽåŒºåˆ†TBOXè®¾å¤‡ã€‚


![[assets/Pasted image 20250508220704.png]]![[assets/Pasted image 20250508220857.png]]

https://www.iotsec-zone.com/article/367

| åè®®      | æ˜¯å¦å¸¸ç”¨      | ä½¿ç”¨åœºæ™¯                 | ä¼˜ç‚¹                 | ç¼ºç‚¹                 |
| ------- | --------- | -------------------- | ------------------ | ------------------ |
| âœ… MQTT  | â­â­â­â­ï¼ˆæœ€å¸¸ç”¨ï¼‰ | å®žæ—¶é€šä¿¡ã€çŠ¶æ€ä¸ŠæŠ¥ã€è¿œç¨‹æŒ‡ä»¤       | è½»é‡ã€æ”¯æŒé•¿è¿žæŽ¥ã€ä½ŽåŠŸè€—ã€QoSä¿éšœ | äºŒè¿›åˆ¶åè®®è°ƒè¯•ä¸ä¾¿ï¼Œéœ€ä¸“ç”¨å®¢æˆ·ç«¯å·¥å…· |
| âœ… TCP   | â­â­        | è‡ªå®šä¹‰åè®®çš„åŸºç¡€ï¼ˆå°¤å…¶æ˜¯æ—©æœŸTSPç³»ç»Ÿï¼‰ | çµæ´»ã€å¯å®šåˆ¶ã€æ€§èƒ½å¥½         | æ— æ ‡å‡†ç»“æž„ï¼Œéœ€è‡ªè¡Œè®¾è®¡ä¼šè¯ç®¡ç†ç­‰   |
| âœ… HTTPS | â­â­        | è®¾å¤‡æ³¨å†Œã€è¡¥å‘æ•°æ®ã€å‡çº§ç­‰éžå®žæ—¶æ“ä½œ   | å®‰å…¨ï¼ˆTLSï¼‰ï¼Œè°ƒè¯•æ–¹ä¾¿ï¼Œæµè§ˆå™¨å…¼å®¹ | å»ºè¿žæ…¢ã€é€šä¿¡é¢‘ç¹æ—¶æ•ˆçŽ‡ä½Žã€åŠŸè€—é«˜   |

|åœºæ™¯|æŽ¨èåè®®|ç†ç”±|
|---|---|---|
|å®žæ—¶çŠ¶æ€ä¸ŠæŠ¥ / æŒ‡ä»¤æŽ¨é€|MQTT|é•¿è¿žæŽ¥ä½Žå»¶è¿Ÿï¼Œæ”¯æŒ QoSï¼Œå¹¿æ³›é€‚ç”¨äºŽè½¦è”ç½‘|
|å¤§æ–‡ä»¶ä¼ è¾“ï¼ˆå¦‚ OTA å‡çº§ï¼‰|HTTPS|ä¼ è¾“å¯é ã€æ˜“éƒ¨ç½² CDNï¼Œæ”¯æŒæ–­ç‚¹ç»­ä¼ |
|é¦–æ¬¡æ³¨å†Œ / é‰´æƒ / é…ç½®æ‹‰å–|HTTPS|å®‰å…¨ä¸”åªéœ€å¶å°”è¿žæŽ¥|
|å®šåˆ¶è€å¹³å°æˆ–æ—  MQTT ç½‘å…³çš„ç³»ç»Ÿ|TCP|å…è®¸åŽ‚å•†å®Œå…¨å®šåˆ¶åè®®æ ¼å¼ï¼Œä½†éœ€é¢å¤–å¼€å‘è§£æžé€»è¾‘|

| é¡¹ç›®   | CAN æ€»çº¿                            | TCP åè®®                                |
| ---- | --------------------------------- | ------------------------------------- |
| å®šä¹‰   | æŽ§åˆ¶å™¨å±€åŸŸç½‘åè®®ï¼ˆController Area Networkï¼‰ | ä¼ è¾“æŽ§åˆ¶åè®®ï¼ˆTransmission Control Protocolï¼‰ |
| å·¥ä½œå±‚çº§ | **ç‰©ç†å±‚ + æ•°æ®é“¾è·¯å±‚**                   | **ä¼ è¾“å±‚**ï¼ˆTCP/IP å››å±‚æ¨¡åž‹ï¼‰                  |
| åº”ç”¨åœºæ™¯ | æ±½è½¦å†…ã€å·¥ä¸šè‡ªåŠ¨åŒ–ã€æœºå™¨äºº                     | äº’è”ç½‘é€šä¿¡ï¼ˆæµè§ˆå™¨ã€APPã€WebæœåŠ¡å™¨ï¼‰                 |
| ä¼ è¾“æ–¹å¼ | å¹¿æ’­å¼ï¼ˆæ‰€æœ‰èŠ‚ç‚¹æŽ¥æ”¶ï¼‰ï¼Œæ— è¿žæŽ¥                   | é¢å‘è¿žæŽ¥ï¼Œä¸€å¯¹ä¸€å¯é é€šä¿¡                          |
| å¸¦å®½   | é€šå¸¸ â‰¤ 1 Mbpsï¼ˆCAN FD å¯æå‡ï¼‰           | å–å†³äºŽç½‘ç»œçŽ¯å¢ƒï¼ˆ10Mbps ~ Gbpsï¼‰                |
| å…¸åž‹é€šä¿¡ | è½¦å†… ECU ä¹‹é—´ä¼ æ„Ÿå™¨/æŽ§åˆ¶å™¨æ•°æ®ä¼ è¾“              | ç½‘é¡µåŠ è½½ã€èŠå¤©æ¶ˆæ¯ã€è§†é¢‘æµä¼ è¾“ç­‰                      |

## ðŸš— CAN â†’ ç½‘å…³ â†’ TCP/MQTT â†’ TSP é€šä¿¡é“¾è·¯æ€»è§ˆå›¾

less

å¤åˆ¶ç¼–è¾‘

`[ å„ç±»ECU ]    |    â†“ï¼ˆCANæ€»çº¿ï¼‰ [ è½¦è½½ç½‘å…³ï¼ˆT-Boxï¼‰ ]    |    â†“ï¼ˆTCP/MQTT/HTTPSï¼‰ [ TSPäº‘å¹³å° ]`

---

## ðŸ” ä¸€ã€è§’è‰²è¯´æ˜Ž

|è§’è‰²|è¯´æ˜Ž|
|---|---|
|**ECU**|å‘åŠ¨æœº/è½¦èº«/ç©ºè°ƒç­‰æŽ§åˆ¶å™¨ï¼Œå·¥ä½œåœ¨ CAN ç½‘ç»œä¸­|
|**T-Box/ç½‘å…³**|è¿žæŽ¥ CAN æ€»çº¿ï¼Œæ”¶é›†æ•°æ®å¹¶ä¸Šä¼ åˆ°äº‘ï¼ˆTSPï¼‰|
|**TSP**|äº‘ç«¯å¹³å°ï¼ŒæŽ¥æ”¶æ•°æ®ã€åšè¿œç¨‹æŽ§åˆ¶ã€OTAã€ç›‘æŽ§ç­‰|

---

## ðŸ”„ äºŒã€è¯¦ç»†æµç¨‹

### ðŸš˜ 1. è½¦å†… CAN ç½‘ç»œé‡‡é›†æ•°æ®

- æ¯ä¸ª ECU å‘¨æœŸæ€§å¹¿æ’­è‡ªå·±çš„çŠ¶æ€ï¼Œå¦‚ï¼š
    
    - å‘åŠ¨æœº ECU â†’ å‘è½¬é€Ÿæ•°æ®ï¼›
        
    - ç”µæ± ç®¡ç† ECU â†’ å‘ç”µåŽ‹/æ¸©åº¦æ•°æ®ï¼›
        
- è¿™äº›æ•°æ®éƒ½æ˜¯ **CAN æŠ¥æ–‡ï¼ˆID + Dataï¼‰**ã€‚
    

### ðŸ“¦ 2. T-Box ä½œä¸º**CAN ç½‘å…³**

- T-Box è¿žæŽ¥åˆ° CAN æ€»çº¿ï¼›
    
- ä½¿ç”¨é©±åŠ¨ç¨‹åºï¼ˆå¦‚ SocketCAN æˆ–ä¸“ç”¨ MCU é©±åŠ¨ï¼‰ç›‘å¬æ‰€æœ‰ CAN æŠ¥æ–‡ï¼›
    
- é€šè¿‡ DBC æ–‡ä»¶ï¼ˆåè®®å®šä¹‰ï¼‰è§£æžæŠ¥æ–‡æˆ**å¯è¯»å‚æ•°**ï¼›
    
    makefile
    
    å¤åˆ¶ç¼–è¾‘
    
    `0x100: vehicle_speed = 80 km/h 0x205: battery_voltage = 12.4 V`
    

### ðŸ§  3. T-Box åšåè®®é€‚é…å’Œæ‰“åŒ…

- å°†è§£æžåŽçš„æ•°æ®è½¬æ¢æˆ**äº‘å¹³å°èƒ½è¯†åˆ«çš„æ ¼å¼**ï¼š
    
    - è‡ªå®šä¹‰ JSONï¼›
        
    - GB/T 32960 æ ¼å¼ï¼›
        
    - Protobuf ç¼–ç ç»“æž„ï¼›
        
- åŠ å…¥èº«ä»½ä¿¡æ¯ï¼ˆå¦‚ VINã€ICCIDã€è®¾å¤‡IDï¼‰ï¼›
    
- ç»Ÿä¸€æ‰“åŒ…ã€‚
    

### ðŸ“¡ 4. ä½¿ç”¨ TCP / MQTT / HTTPS ä¸Šä¼ åˆ° TSP

- **MQTT**ï¼šå»ºç«‹é•¿è¿žæŽ¥ï¼Œå‘¨æœŸæ€§ä¸ŠæŠ¥çŠ¶æ€/å®žæ—¶æŽ¥æ”¶æŒ‡ä»¤ï¼›
    
- **TCP**ï¼šé€‚åˆè‡ªå®šä¹‰åè®®çš„é•¿è¿žæŽ¥ï¼›
    
- **HTTPS**ï¼šé€‚åˆé¦–æ¬¡æ³¨å†Œã€è¡¥å‘æ•°æ®ã€OTA æ–‡ä»¶è¯·æ±‚ç­‰ã€‚
    

### â˜ï¸ 5. TSP äº‘å¹³å°å¤„ç†æ•°æ®

- é‰´æƒ/éªŒç­¾ï¼Œåˆ¤æ–­æ•°æ®åˆæ³•ï¼›
    
- å…¥åº“ã€æŠ¥è­¦æ£€æµ‹ã€æ˜¾ç¤ºåœ¨ç”¨æˆ·Appï¼›
    
- å¯ä»¥å‘æŽ§åˆ¶å‘½ä»¤ï¼ˆä¾‹å¦‚è¿œç¨‹å¼€ç©ºè°ƒï¼‰å›žä¼ åˆ° T-Boxï¼›
    
- T-Box æ”¶åˆ°åŽé€šè¿‡ CAN ä¸‹å‘å‘½ä»¤ç»™ ECUã€‚
    

---


```mermaid
graph TD
    ECU1[å‘åŠ¨æœºECU] --> CAN[CANæ€»çº¿]
    ECU2[ç”µæ± ç®¡ç†ECU] --> CAN
    CAN --> TBOX[T-Boxï¼ˆç½‘å…³ï¼‰]
    TBOX --> TCP[TCP/MQTT/HTTPS ä¸Šä¼ ]
    TCP --> TSP[äº‘ç«¯TSPå¹³å°]
    TSP -->|æŽ§åˆ¶æŒ‡ä»¤| TBOX
    TBOX -->|CANå‘½ä»¤| CAN
```

---
